!function(e,t){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.zDropdown=t()}(window,function(){function e(e){return this.options=e||{},this.init(this.options.el),{destroy:this.destroy.bind(this),changeItem:this.changeItem.bind(this),update:this.updateItems.bind(this)}}var t={addEventListener:function(e,t,n){return e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){return e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},fireEvent:function(e,t){if(document.createEventObject){var n=document.createEventObject();return e.fireEvent("on"+t,n)}var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)},isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},closest:function(e,t){var n,i=(document||ownerDocument).querySelectorAll(t);do{for(n=i.length;--n>=0&&i.item(n)!==e;);}while(n<0&&(e=e.parentElement));return e}};return Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o}),e.prototype.init=function(e){if(t.isElement(e)){if("select"!==e.tagName.toLowerCase())return console.log("[zDropdown]: Element is not select")}else e=document.getElementById(e);if(null===e)return console.log("[zDropdown]: No element found -> ",e);e.style.display="none",this.selectTagDOM=e,this.render()},e.prototype.render=function(){var e=this.options,t=e.skin?" "+e.skin:"";this.selectTagDOM.getAttribute("disabled")&&(this.hasDisabled=!0,t+=" disabled");var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("i"),r=document.createElement("ul");n.className="z-dropdown"+t,o.className="z-dropdown-arrow",r.className="z-dropdown-container",i.className="z-dropdown-default",n.appendChild(o),n.appendChild(i),n.appendChild(r),this.dropdownContainer=r,this.dropdownArrow=o,this.dropdownWrap=n,this.dropdownDefault=i,this.selectTagDOM.parentNode.insertBefore(n,this.selectTagDOM),this.updateItems(),this.addListener()},e.prototype.updateItems=function(){var e=this.selectTagDOM.options,n=e.selectedIndex,i=[];if(e.length>0)for(var o=0,r=e.length;o<r;o++){var s=e[o];i.push({value:s.value,text:s.innerText})}this.items=i;for(var a="",o=0,r=i.length;o<r;o++){var d=o==n?"selected":"",s=i[o];a+='<li class="'+d+'" index="'+o+'" value="'+s.value+'">'+s.text+"</li>"}this.dropdownContainer.innerHTML=a,this.dropdownDefault.innerText=i[n]&&i[n].text||"none",this.currentIndex=n;var c=this;setTimeout(function(){(c.selectTagDOM.getAttribute("disabled")?t.addClass:t.removeClass)(c.dropdownWrap,"disabled")},0)},e.prototype.changeItem=function(e){var n=this.items,i=this.selectTagDOM,o=this.dropdownContainer,r=this.dropdownDefault,s=this.currentIndex;e=e||0;var a=n[e];e>n.length||e==s||(r.innerText=a.text,t.removeClass(o.children[s],"selected"),t.addClass(o.children[e],"selected"),i.selectedIndex=e,this.currentIndex=e)},e.prototype.removeListener=function(){t.removeEventListener(this.selectTagDOM,"change",this.selectChangeHandler),t.removeEventListener(this.dropdownWrap,"click",this.wrapClickHandler),t.removeEventListener(document,"click",this.documentClickHandler)},e.prototype.addListener=function(){this.wrapClickHandler=this.wrapClickHandler.bind(this),this.selectChangeHandler=this.selectChangeHandler.bind(this),this.documentClickHandler=this.documentClickHandler.bind(this),t.addEventListener(this.selectTagDOM,"change",this.selectChangeHandler),t.addEventListener(this.dropdownWrap,"click",this.wrapClickHandler)},e.prototype.wrapClickHandler=function(e){var n=e.target||e.srcElement,i=this.options,o=this.items;if(!this.selectTagDOM.getAttribute("disabled")||this.isShowContainer)if(this.isShowContainer=!this.isShowContainer,(this.isShowContainer?t.addClass:t.removeClass)(this.dropdownWrap,"active"),"li"===n.nodeName.toLowerCase()){var r=n.getAttribute("index"),s=o[r];this.changeItem(r),t.fireEvent(this.selectTagDOM,"change"),i.change&&i.change(s.value,s.text,r),t.removeEventListener(document,"click",this.documentClickHandler)}else t.addEventListener(document,"click",this.documentClickHandler)},e.prototype.selectChangeHandler=function(e){var t=e.target||e.srcElement;this.changeItem(t.selectedIndex)},e.prototype.documentClickHandler=function(e){var n=e.target||e.srcElement;t.closest(n,".z-dropdown")||(this.isShowContainer=!1,t.removeClass(this.dropdownWrap,"active"),t.removeEventListener(document,"click",this.documentClickHandler))},e.prototype.destroy=function(){this.isDestroy||(this.removeListener(),this.dropdownWrap.parentNode.removeChild(this.dropdownWrap),this.dropdownWrap=this.dropdownDefault=this.dropdownArrow=this.dropdownContainer=null,this.selectTagDOM.style.display="",this.isDestroy=!0)},e});
//# sourceMappingURL=zDropdown.min.js.map
